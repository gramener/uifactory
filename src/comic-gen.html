<template $name="comic-gen" base-url="https://gramener.com/comicgen/v1/comic" name="" gender="" angle="" character="" facestyle="" face="" hair=""
  eye="" mouth="" head="" side="" bottom="" body="" nose="" emotion="" attire="" pose="" face=""
  shirt="" pant="" suit="" tie="" hair="" shoe="" shirt-left="" shirt-right="" pant-right=""
  pant-left="" belt="" dress="" mirror="" x="" y="" width="" height="" scale="" ext="">
  <img src="<%= uifactory.comicGen(this) %>">
  <script>
    uifactory.comicGen = function(node) {
      let q = []
      for (let [key, val] of Object.entries(node.$data))
        if (!key.match(/baseUrl/) && !key.match(/^\$/) && val)
          q.push(encodeURIComponent(key) + '=' + encodeURIComponent(val))
      return `${node.$data.baseUrl}?${q.join('&')}`
    }
  </script>
</template>
